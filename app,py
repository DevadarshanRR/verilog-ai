import streamlit as st
import os
from groq import Groq

st.set_page_config(page_title="AI Verilog Generator")

st.title("ðŸ”§ AI Verilog Code Generator")
st.write("Generate synthesizable Verilog from natural language.")

# Get API key from environment
api_key = os.getenv("GROQ_API_KEY")

if not api_key:
    st.error("API key not found. Set GROQ_API_KEY in environment variables.")
else:
    client = Groq(api_key=api_key)

    prompt = st.text_area("Enter hardware description")

    if st.button("Generate Verilog"):
        if prompt.strip() == "":
            st.warning("Please enter a hardware description.")
        else:
            with st.spinner("Generating Verilog code..."):
                try:
                    response = client.chat.completions.create(
                        model="llama3-8b-8192",
                        messages=[
                            {"role": "system", "content": "You are a Verilog HDL expert. Generate clean synthesizable Verilog code only."},
                            {"role": "user", "content": prompt}
                        ]
                    )

                    verilog_code = response.choices[0].message.content
                    st.code(verilog_code, language="verilog")

                except Exception as e:
                    st.error(f"Error: {e}")
